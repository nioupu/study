复习grep sed awk 等文本处理工具


文本处理工具2：


1.cut：文本列提取器

按分隔符提取指定列        -d：指定分隔符    如： cut -d ' ' _f11 log.txt            以空格为分隔符提取第11列        

-c：按字符位置提取          如：cut -c 1-5 log.txt          提取每行前五个字符

2.sort：文本排序器 （ascll码）

对文本行排序，支持正序，倒序，按序排列

-n：按数值排序           -r：倒序排序          -k：按指定列排序    如：sort -k11 log.txt      按第11列排序

3.uniq：文本去重器

去除连续重复的行，结合-c可统计重复次数      使用时先sort，因为是只对连续重复的行有效 例如：sort log.txt | uniq -c


筛选过去24小时sudo的使用者
  
1.确认时间戳和用户名的列位置：sudo head -n5 /var/log/auth.log
2.过去24小时内使用sudo的用户并统计次数：sudo grep 'sudo' /var/log/auth.log | grep "$(date -d '24 hours ago' +)" | awk '{print $9}' | sort | uniq -c
     date -d:描述时间          +：grep会全格式搜索              